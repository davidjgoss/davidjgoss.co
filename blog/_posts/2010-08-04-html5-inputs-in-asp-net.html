---
title: HTML5 inputs in ASP.NET
tags:
- asp.net
- html5
summary:
  Trying to get an ASP.NET TextBox control working with new HTML5 input types and attributes has not proven easy; I've ended up writing my own.
---
<p>Recently I've been revisiting some HTML I wrote a while ago and seeing what would benefit from some HTML5 magic. HTML5's design philosophy makes this quite easy at the client side, due to a policy of backwards-compatibility from the spec's authors. For example, using a new input type such as <code>search</code> or <code>email</code> is fine because a browser that doesn't understand it will just render it as if it's type were <code>text</code>, which is what you would have used anyway.</p>
<p>It gets a bit more tricky when you're working on the server side. The site I work on at the moment has an ASP.NET back end (specifically, Web Forms &mdash; I don't know whether this applies to MVC or not), which has the downside (among others) that you don't have absolute control over some of the markup that it generates for forms. Here's how you write a regular text field in .NET:</p>
<pre><code>&lt;asp:TextBox id="query" runat="server" /&gt;
</code></pre>
<p>Like many things, it uses a server control to output an <code>input type="text"</code> to the page. Because you've declared the control like this, you can use your C# or VB code to manipulate it when the page is generated and when the postback occurs. So, how to change this so we are using input <code>type="search"</code>? First I tried this:</p>
<pre><code>&lt;input type="search" id="query" runat="server" /&gt;
</code></pre>
<p>The rendered page showed an error message about <code>search</code> not being a valid input type, so that was out. Next I tried this:</p>
<pre><code>&lt;asp:TextBox type="search" id="query" runat="server" /&gt;
</code></pre>
<p>The <code>type="search"</code> attribute I added was totally ignored, and the element was rendered as a regular text box. Next I tried leaving the control itself as a standard <code>asp:TextBox</code>, but adding some code to be executed on <code>Page_PreRender</code> to delete the <code>type</code> attribute from the element and replace it with <code>type="search"</code>. Same result as above &mdash; it was ignored. <del>Oh, and you can't use JavaScript to change the type attribute once the page has loaded &mdash; that doesn't work either</del> You can use JavaScript to change the <code>type</code> attribute (although it doesn't work if you do it through jQuery), but that rather misses the point.</p>
<p>By this time I was getting seriously frustrated, and the only thing left was just to write a plain HTML tag like this:</p>
<pre><code>&lt;input type="search" id="query" name="query" /&gt;
</code></pre>
<p>Note the absence of the <code>runat="server"</code> attribute, so the element is rendered on the page as-is without being processed by the server, and we have to get the value the old-fashioned way from the request's POST data (bypassing .NET's postback architecture entirely):</p>
<pre><code>string query = Request.Form["query"];
</code></pre>
<p>It works...but there are disadvantages:</p>
<ul>
<li>Because it's not a server control, you won't be able to manipulate the element in the code behind before the page renders, so you'll have to hard code things like the value and placeholder instead of retrieving them from a  database or resource file.</li>
<li>Because it's not a server control, you won't be able to use an <code>asp:Label</code> control to label it, so you'll have to hard code that element and it's values as well.</li>
<li>Because it's not a server control, it bypasses the Viewstate, which means it is less secure (although I don't know enough about .NET to understand why).</li>
</ul>
<p><strong>Update:</strong> Since writing this, I've ended up <a href="https://github.com/davidjgoss/webforms2-dotnet">writing my own control</a> that extends TextBox and provides the HTML5 features we want. Also, future versions of .NET will provide this as standard.</p>
